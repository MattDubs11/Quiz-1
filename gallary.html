# STEM AI Quiz 2 — Data Visualization Section

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

# -----------------------------
# 1. Load Dataset
# -----------------------------
data = {
    "student": list("ABCDEFGHIJKL"),
    "study_hours": [2,5,4,7,8,10,6,3,9,4,8,7],
    "sleep_hours": [8,6,7,5,4,6,7,5,3,6,5,8],
    "exam_score": [55,68,72,78,83,90,74,60,88,70,85,80]
}

df = pd.DataFrame(data)

# -----------------------------
# 2(a). Plot 1: Study vs Exam Score
# -----------------------------
plt.figure()
plt.scatter(df["study_hours"], df["exam_score"])

# Trendline
slope, intercept = np.polyfit(df["study_hours"], df["exam_score"], 1)
x_vals = np.linspace(df["study_hours"].min(), df["study_hours"].max(), 100)
y_vals = slope * x_vals + intercept
plt.plot(x_vals, y_vals, label="Trendline")

plt.title("Study Hours vs Exam Score")
plt.xlabel("Study Hours")
plt.ylabel("Exam Score")
plt.legend()
plt.show()

# -----------------------------
# 2(b). Plot 2: Sleep vs Exam Score (Colored by Study Bucket)
# -----------------------------
def bucket(hours):
    if hours <= 4:
        return "Low (0-4)"
    elif 5 <= hours <= 7:
        return "Medium (5-7)"
    else:
        return "High (8+)"

df["study_bucket"] = df["study_hours"].apply(bucket)

plt.figure()

for group in df["study_bucket"].unique():
    subset = df[df["study_bucket"] == group]
    plt.scatter(subset["sleep_hours"], subset["exam_score"], label=group)

plt.title("Sleep Hours vs Exam Score (Colored by Study Bucket)")
plt.xlabel("Sleep Hours")
plt.ylabel("Exam Score")
plt.legend()
plt.show()

# -----------------------------
# 4. Interpretation (2–4 sentences)
# -----------------------------
print("\nAnalysis:")
print("Study hours appear more predictive of exam score because the scatterplot shows a strong positive linear trend.")
print("Sleep hours show a weaker and less consistent relationship with exam scores.")
print("Student I is an outlier because they scored 88 despite sleeping only 3 hours, which deviates from the general sleep pattern.")

# -----------------------------
# 5. Verification
# -----------------------------
print("\n# Verification")
print(df.describe())
print("Slope of trendline (Study vs Exam Score):", slope)
